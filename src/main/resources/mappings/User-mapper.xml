<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
		PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserDao">
	<insert id="join" parameterType="user">
	INSERT INTO USER(
	    NICKNAME,
	    NAME,
	    GENDER,
	    JOB,
	    PHONENUMBER,
	    EMAIL,
	    PASSWORD,
	    ROLE
		
	) VALUE (
	    #{nickname},
		#{name},
		#{gender},
		#{job},
		#{phonenumber},
		#{email},
		#{password},
		#{role}
	)
	</insert>
	
	<select id="emailCheck" parameterType="string" resultType="int">
		SELECT COUNT(*)
		FROM USER
		WHERE EMAIL = #{email}
	</select>
	
	<select id="nicknameCheck" parameterType="string" resultType="int">
		SELECT COUNT(*)
		FROM USER
		WHERE NICKNAME = #{nickname}
	</select>
	
	<select id="nameCheck" parameterType="string" resultType="int">
		SELECT COUNT(*)
		FROM USER
		WHERE NAME = #{name}
	</select>
	<select id="findMembersUsingKeyword" parameterType="string" resultType="member">
		SELECT U.NICKNAME
		, U.NAME
		, U.EMAIL
		, U.JOB
		, U.ROLE
		, U.PROFILE_IMAGE
		FROM USER U
		WHERE 1=1
		<if test="searchKeyword != null and searchKeyword != ''">
			AND (U.NICKNAME LIKE CONCAT('%', #{searchKeyword}, '%')
			OR U.NAME LIKE CONCAT('%', #{searchKeyword}, '%')
			OR U.EMAIL LIKE CONCAT('%', #{searchKeyword}, '%'))
		</if>
	</select>

	
	
	
	
	
	
	
	
	
	
</mapper>