<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="UserFeedsDao">
    <select id="getUserInfo" parameterType="int" resultType="profile">
        select profileimage,name,introduction,email,phonenumber,gender ,status ,job ,siteurl
        from user
        where userid  = #{id}
    </select>

    <select id="getUserPopularPofol" parameterType="int" resultType="portfolio">

    </select>

    <select id="getUserPortfolio" parameterType="int" resultType="portfolio">
        SELECT
        p.portfolioid,
        p.userid,
        p.thumbnailurl,
        p.content,
        p.regdate,
        GROUP_CONCAT(DISTINCT st.skillname) AS skillname,
        GROUP_CONCAT(DISTINCT h.htmlurl) AS htmlurl,
        GROUP_CONCAT(DISTINCT c.cssurl) AS cssurl,
        GROUP_CONCAT(DISTINCT j.javascripturl) AS jsurl
        FROM portfolio p
        JOIN portfolio_skilltag ps
        ON p.portfolioid = ps.portfolioid
        JOIN skilltag st
        ON ps.hashtagid = st.hashtagid
        JOIN html h
        ON p.portfolioid = h.portfolioid
        JOIN css c
        ON p.portfolioid = c.portfolioid
        JOIN javascript j
        ON p.portfolioid = j.portfolioid
        WHERE p.userid = #{id}
        GROUP BY p.portfolioid, p.userid, p.thumbnailurl, p.content, p.regdate;
    </select>
</mapper>